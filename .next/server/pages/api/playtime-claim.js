"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/playtime-claim";
exports.ids = ["pages/api/playtime-claim"];
exports.modules = {

/***/ "firebase/app":
/*!*******************************!*\
  !*** external "firebase/app" ***!
  \*******************************/
/***/ ((module) => {

module.exports = import("firebase/app");;

/***/ }),

/***/ "firebase/firestore":
/*!*************************************!*\
  !*** external "firebase/firestore" ***!
  \*************************************/
/***/ ((module) => {

module.exports = import("firebase/firestore");;

/***/ }),

/***/ "(api)/./pages/api/playtime-claim.ts":
/*!*************************************!*\
  !*** ./pages/api/playtime-claim.ts ***!
  \*************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var firebase_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/app */ \"firebase/app\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_app__WEBPACK_IMPORTED_MODULE_0__, firebase_firestore__WEBPACK_IMPORTED_MODULE_1__]);\n([firebase_app__WEBPACK_IMPORTED_MODULE_0__, firebase_firestore__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyC0-HItwz1t9XZXz04YJ0JXGh98Hq-V4w4\",\n    authDomain: \"playtime-c0443.firebaseapp.com\",\n    projectId: \"playtime-c0443\",\n    storageBucket: \"playtime-c0443.appspot.com\",\n    messagingSenderId: \"696120559228\",\n    appId: \"1:696120559228:web:e47f5ba8cd5674c62f2bf9\",\n    measurementId: \"G-SB7VGP7RF2\"\n};\nconst app = (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.initializeApp)(firebaseConfig);\nconst db = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getFirestore)(app);\nasync function handler(req, res) {\n    const { walletAddress , playtime , timestamp ,  } = req.body;\n    // Validate input data\n    if (!walletAddress || !playtime || !timestamp) {\n        return res.status(400).json({\n            message: \"Missing required data\"\n        });\n    }\n    const historyCollectionRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(db, \"users\", walletAddress, \"history\");\n    try {\n        // Add the current playtime to the user's history\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.addDoc)(historyCollectionRef, {\n            playtime,\n            timestamp: firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.Timestamp.fromDate(new Date(timestamp))\n        });\n        const historyQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)(historyCollectionRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.orderBy)(\"timestamp\", \"desc\"));\n        const historySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(historyQuery);\n        if (historySnapshot.size > 1) {\n            const historyDocs = historySnapshot.docs;\n            const lastPlayed = historyDocs[0].data();\n            const secondLastPlayed = historyDocs[1].data();\n            const historyArray = historyDocs.map((doc)=>{\n                const data = doc.data();\n                return {\n                    ...data,\n                    timestamp: data.timestamp.toDate().toISOString()\n                };\n            });\n            const playtimeDifference = lastPlayed.playtime - secondLastPlayed.playtime;\n            res.status(200).json({\n                playtimeDifference,\n                historyArray\n            });\n        } else {\n            res.status(200).json({\n                success: true,\n                message: \"Playtime added\"\n            });\n        }\n    } catch (error) {\n        console.error(\"Error adding playtime to history:\", error);\n        res.status(500).json({\n            message: \"Error processing request\"\n        });\n    }\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0FBTyxFQUFFLENBQWdCO1lBQUMsQ0FBQyxDQUFDLENBQUM7UUFDckUsQ0FBQztJQUNILENBQUMsQ0FBQyxLQUFLLEVBQUVtQixLQUFLLEVBQUUsQ0FBQztRQUNmQyxPQUFPLENBQUNELEtBQUssQ0FBQyxDQUFtQyxvQ0FBRUEsS0FBSyxDQUFDLENBQUM7UUFDMUQxQixHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLEVBQUVDLElBQUksQ0FBQyxDQUFDO1lBQUNDLE9BQU8sRUFBRSxDQUEwQjtRQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2hFLENBQUM7QUFDSCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc29sYW5hLWludHJvLWZyb250ZW5kLy4vcGFnZXMvYXBpL3BsYXl0aW1lLWNsYWltLnRzPzY4MGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaW5pdGlhbGl6ZUFwcCB9IGZyb20gXCJmaXJlYmFzZS9hcHBcIjtcbmltcG9ydCB7XG4gIGdldEZpcmVzdG9yZSxcbiAgY29sbGVjdGlvbixcbiAgYWRkRG9jLFxuICBnZXREb2NzLFxuICBxdWVyeSxcbiAgb3JkZXJCeSxcbiAgbGltaXQsXG4gIHdoZXJlLFxuICBUaW1lc3RhbXAsXG59IGZyb20gXCJmaXJlYmFzZS9maXJlc3RvcmVcIjtcblxuaW1wb3J0IHR5cGUgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSBcIm5leHRcIjtcblxuY29uc3QgZmlyZWJhc2VDb25maWcgPSB7XG4gIGFwaUtleTogXCJBSXphU3lDMC1ISXR3ejF0OVhaWHowNFlKMEpYR2g5OEhxLVY0dzRcIixcbiAgYXV0aERvbWFpbjogXCJwbGF5dGltZS1jMDQ0My5maXJlYmFzZWFwcC5jb21cIixcbiAgcHJvamVjdElkOiBcInBsYXl0aW1lLWMwNDQzXCIsXG4gIHN0b3JhZ2VCdWNrZXQ6IFwicGxheXRpbWUtYzA0NDMuYXBwc3BvdC5jb21cIixcbiAgbWVzc2FnaW5nU2VuZGVySWQ6IFwiNjk2MTIwNTU5MjI4XCIsXG4gIGFwcElkOiBcIjE6Njk2MTIwNTU5MjI4OndlYjplNDdmNWJhOGNkNTY3NGM2MmYyYmY5XCIsXG4gIG1lYXN1cmVtZW50SWQ6IFwiRy1TQjdWR1A3UkYyXCIsXG59O1xuXG5jb25zdCBhcHAgPSBpbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTtcbmNvbnN0IGRiID0gZ2V0RmlyZXN0b3JlKGFwcCk7XG5cbmV4cG9ydCB0eXBlIEhpc3RvcnlFbnRyeSA9IHtcbiAgcGxheXRpbWU6IG51bWJlcjtcbiAgdGltZXN0YW1wOiBUaW1lc3RhbXA7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKFxuICByZXE6IE5leHRBcGlSZXF1ZXN0LFxuICByZXM6IE5leHRBcGlSZXNwb25zZVxuKSB7XG4gIGNvbnN0IHtcbiAgICB3YWxsZXRBZGRyZXNzLFxuICAgIHBsYXl0aW1lLFxuICAgIHRpbWVzdGFtcCxcbiAgfTogeyB3YWxsZXRBZGRyZXNzOiBzdHJpbmc7IHBsYXl0aW1lOiBudW1iZXI7IHRpbWVzdGFtcDogc3RyaW5nIH0gPSByZXEuYm9keTtcblxuICAvLyBWYWxpZGF0ZSBpbnB1dCBkYXRhXG4gIGlmICghd2FsbGV0QWRkcmVzcyB8fCAhcGxheXRpbWUgfHwgIXRpbWVzdGFtcCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiTWlzc2luZyByZXF1aXJlZCBkYXRhXCIgfSk7XG4gIH1cblxuICBjb25zdCBoaXN0b3J5Q29sbGVjdGlvblJlZiA9IGNvbGxlY3Rpb24oXG4gICAgZGIsXG4gICAgXCJ1c2Vyc1wiLFxuICAgIHdhbGxldEFkZHJlc3MsXG4gICAgXCJoaXN0b3J5XCJcbiAgKTtcblxuICB0cnkge1xuICAgIC8vIEFkZCB0aGUgY3VycmVudCBwbGF5dGltZSB0byB0aGUgdXNlcidzIGhpc3RvcnlcbiAgICBhd2FpdCBhZGREb2MoaGlzdG9yeUNvbGxlY3Rpb25SZWYsIHtcbiAgICAgIHBsYXl0aW1lLFxuICAgICAgdGltZXN0YW1wOiBUaW1lc3RhbXAuZnJvbURhdGUobmV3IERhdGUodGltZXN0YW1wKSksXG4gICAgfSk7XG5cbiAgICBjb25zdCBoaXN0b3J5UXVlcnkgPSBxdWVyeShcbiAgICAgIGhpc3RvcnlDb2xsZWN0aW9uUmVmLFxuICAgICAgb3JkZXJCeShcInRpbWVzdGFtcFwiLCBcImRlc2NcIilcbiAgICApO1xuICAgIGNvbnN0IGhpc3RvcnlTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoaGlzdG9yeVF1ZXJ5KTtcblxuICAgIGlmIChoaXN0b3J5U25hcHNob3Quc2l6ZSA+IDEpIHtcbiAgICAgIGNvbnN0IGhpc3RvcnlEb2NzID0gaGlzdG9yeVNuYXBzaG90LmRvY3M7XG4gICAgICBjb25zdCBsYXN0UGxheWVkID0gaGlzdG9yeURvY3NbMF0uZGF0YSgpIGFzIEhpc3RvcnlFbnRyeTtcbiAgICAgIGNvbnN0IHNlY29uZExhc3RQbGF5ZWQgPSBoaXN0b3J5RG9jc1sxXS5kYXRhKCkgYXMgSGlzdG9yeUVudHJ5O1xuXG4gICAgICBjb25zdCBoaXN0b3J5QXJyYXkgPSBoaXN0b3J5RG9jcy5tYXAoKGRvYykgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0gZG9jLmRhdGEoKSBhcyBIaXN0b3J5RW50cnk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgICB0aW1lc3RhbXA6IGRhdGEudGltZXN0YW1wLnRvRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIH07XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcGxheXRpbWVEaWZmZXJlbmNlID1cbiAgICAgICAgbGFzdFBsYXllZC5wbGF5dGltZSAtIHNlY29uZExhc3RQbGF5ZWQucGxheXRpbWU7XG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHBsYXl0aW1lRGlmZmVyZW5jZSwgaGlzdG9yeUFycmF5IH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6IFwiUGxheXRpbWUgYWRkZWRcIiB9KTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFkZGluZyBwbGF5dGltZSB0byBoaXN0b3J5OlwiLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycm9yIHByb2Nlc3NpbmcgcmVxdWVzdFwiIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiaW5pdGlhbGl6ZUFwcCIsImdldEZpcmVzdG9yZSIsImNvbGxlY3Rpb24iLCJhZGREb2MiLCJnZXREb2NzIiwicXVlcnkiLCJvcmRlckJ5IiwiVGltZXN0YW1wIiwiZmlyZWJhc2VDb25maWciLCJhcGlLZXkiLCJhdXRoRG9tYWluIiwicHJvamVjdElkIiwic3RvcmFnZUJ1Y2tldCIsIm1lc3NhZ2luZ1NlbmRlcklkIiwiYXBwSWQiLCJtZWFzdXJlbWVudElkIiwiYXBwIiwiZGIiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwid2FsbGV0QWRkcmVzcyIsInBsYXl0aW1lIiwidGltZXN0YW1wIiwiYm9keSIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwiaGlzdG9yeUNvbGxlY3Rpb25SZWYiLCJmcm9tRGF0ZSIsIkRhdGUiLCJoaXN0b3J5UXVlcnkiLCJoaXN0b3J5U25hcHNob3QiLCJzaXplIiwiaGlzdG9yeURvY3MiLCJkb2NzIiwibGFzdFBsYXllZCIsImRhdGEiLCJzZWNvbmRMYXN0UGxheWVkIiwiaGlzdG9yeUFycmF5IiwibWFwIiwiZG9jIiwidG9EYXRlIiwidG9JU09TdHJpbmciLCJwbGF5dGltZURpZmZlcmVuY2UiLCJzdWNjZXNzIiwiZXJyb3IiLCJjb25zb2xlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/playtime-claim.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/playtime-claim.ts"));
module.exports = __webpack_exports__;

})();